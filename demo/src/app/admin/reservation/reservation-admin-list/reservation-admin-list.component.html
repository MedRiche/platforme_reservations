<div class="container">
  <h2>Liste des réservations (Admin)</h2>

  <!-- Message d'erreur ou d'info -->
  <div *ngIf="message" class="alert alert-info">{{ message }}</div>

  <!-- Loader pendant le chargement -->
  <div *ngIf="loading" class="mt-3">
    <em>Chargement des réservations...</em>
  </div>

  <!-- Tableau des réservations -->
  <table class="table table-bordered mt-3" *ngIf="!loading && reservations.length > 0">
    <thead>
      <tr>
        <th>Utilisateur</th>
        <th>Espace</th>
        <th>Date début</th>
        <th>Date fin</th>
        <th>Statut</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of reservations">
        <td>{{ r.utilisateur?.email || r.utilisateur }}</td>
        <td>{{ r.espace?.nom || r.espace }}</td>
        <td>{{ r.dateDebut | date:'short' }}</td>
        <td>{{ r.dateFin | date:'short' }}</td>
        <td>{{ r.statut }}</td>
        <td>
          <button *ngIf="r.statut === 'en attente'"
                  class="btn btn-success btn-sm me-1"
                  (click)="confirmerReservation(r._id)">
            Confirmer
          </button>
          <button *ngIf="r.statut !== 'annulée'"
                  class="btn btn-danger btn-sm"
                  (click)="annulerReservation(r._id)">
            Annuler
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Message quand aucune réservation -->
  <div *ngIf="!loading && reservations.length === 0 && !message" class="mt-3">
    Aucune réservation pour le moment.
  </div>
</div>
