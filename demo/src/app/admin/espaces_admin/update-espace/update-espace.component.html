<div class="container mt-5">
  <h2 class="mb-4">Modifier un espace</h2>

  <form [formGroup]="espaceForm" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label for="nom" class="form-label">Nom de l’espace</label>
      <input type="text" id="nom" formControlName="nom" class="form-control" />
    </div>

    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea id="description" formControlName="description" class="form-control" rows="3"></textarea>
    </div>

    <div class="mb-3">
      <label for="capacite" class="form-label">Capacité</label>
      <input type="number" id="capacite" formControlName="capacite" class="form-control" />
    </div>

    <div class="mb-3 form-check">
      <input type="checkbox" id="disponibilite" formControlName="disponibilite" class="form-check-input" />
      <label class="form-check-label" for="disponibilite">Disponible</label>
    </div>

    <div class="mb-3">
      <label for="prixParHeure" class="form-label">Prix par heure</label>
      <input type="number" id="prixParHeure" formControlName="prixParHeure" class="form-control" />
    </div>

    <div class="mb-3">
      <label for="localisation" class="form-label">Localisation</label>
      <input type="text" id="localisation" formControlName="localisation" class="form-control" />
    </div>

    <div class="mb-3">
      <label for="type" class="form-label">Type</label>
      <select id="type" formControlName="type" class="form-select">
        <option value="">-- Choisir un type --</option>
        <option value="Salle">salle</option>
        <option value="Bureau">Bureau</option>
        <option value="hotel">hotel</option>
        <option value="coworking">coworking</option>
        <option value="Amphi">Amphi</option>
        <option value="restaurant">restaurant</option>
        <option value="autre">autre</option>
      </select>
    </div>
    <div class="mb-3">
      <label for="entreprise" class="form-label">Entreprise</label>
      <input type="text" id="entreprise" formControlName="entreprise" class="form-control" />
    </div>


      <!-- ✅ gestion image -->
    <div class="mb-3">
      <label for="image" class="form-label">Image</label>
      <input type="file" id="image" (change)="onFileSelected($event)" class="form-control" accept="image/*" />
    </div>

    <!-- afficher l’image actuelle -->
    <div *ngIf="currentImage" class="mb-3">
      <p>Image actuelle :</p>
      <img [src]="currentImage" alt="Image actuelle" width="150" class="rounded shadow" />
    </div>

    <!-- preview si nouvelle image choisie -->
    <div *ngIf="imagePreview" class="mb-3">
      <p>Nouvelle image :</p>
      <img [src]="imagePreview" alt="Preview" width="150" class="rounded shadow" />
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="espaceForm.invalid">
      Enregistrer les modifications
    </button>
    <button type="button" class="btn btn-secondary ms-2" (click)="onCancel()">Annuler</button>
  </form>
</div>
